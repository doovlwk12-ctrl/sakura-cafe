"use strict";exports.id=88,exports.ids=[88],exports.modules={61210:(e,r,a)=>{a.d(r,{Z:()=>d});var s=a(10326),t=a(17577),l=a(44099),o=a(90976);let d=()=>{let{t:e,isRTL:r}=(0,o.Z)(),[a,d]=(0,t.useState)([]),[n,i]=(0,t.useState)({username:"",email:"",password:"",role:"cashier"}),[c,u]=(0,t.useState)(null),[m,h]=(0,t.useState)(!1),[x,g]=(0,t.useState)(""),b=localStorage.getItem("admin_token"),p=async()=>{if(!b){g("غير مصرح لك بالوصول");return}h(!0),g("");try{d([{_id:"1",username:"admin",email:"admin@sakura.com",role:"admin"},{_id:"2",username:"cashier1",email:"cashier1@sakura.com",role:"cashier"},{_id:"3",username:"user1",email:"user1@sakura.com",role:"user"}]);try{let e=await l.Z.get("http://localhost:5000/api/users",{headers:{Authorization:`Bearer ${b}`},timeout:3e3});d(e.data)}catch(e){console.warn("Backend not available, using mock data")}}catch(e){console.error(e),g("فشل في تحميل البيانات")}finally{h(!1)}};(0,t.useEffect)(()=>{p()},[]);let y=async()=>{if(!n.username||!n.email){g("يرجى ملء جميع الحقول المطلوبة");return}try{let e={_id:Date.now().toString(),username:n.username,email:n.email,role:n.role};d(r=>[...r,e]),i({username:"",email:"",password:"",role:"cashier"});try{await l.Z.post("http://localhost:5000/api/users",n,{headers:{Authorization:`Bearer ${b}`},timeout:3e3})}catch(e){console.warn("Backend not available, user added locally only")}}catch(e){console.error(e),g("فشل في إضافة المستخدم")}},j=async()=>{if(!c||!n.username||!n.email){g("يرجى ملء جميع الحقول المطلوبة");return}try{d(e=>e.map(e=>e._id===c._id?{...e,username:n.username,email:n.email,role:n.role}:e)),u(null),i({username:"",email:"",password:"",role:"cashier"});try{await l.Z.put(`http://localhost:5000/api/users/${c._id}`,n,{headers:{Authorization:`Bearer ${b}`},timeout:3e3})}catch(e){console.warn("Backend not available, user updated locally only")}}catch(e){console.error(e),g("فشل في تحديث المستخدم")}},N=async e=>{if(confirm("هل أنت متأكد من حذف هذا المستخدم؟"))try{d(r=>r.filter(r=>r._id!==e));try{await l.Z.delete(`http://localhost:5000/api/users/${e}`,{headers:{Authorization:`Bearer ${b}`},timeout:3e3})}catch(e){console.warn("Backend not available, user deleted locally only")}}catch(e){console.error(e),g("فشل في حذف المستخدم")}};return(0,s.jsxs)("div",{className:"p-3 md:p-6 bg-white rounded-lg shadow-lg",children:[s.jsx("h1",{className:"text-xl md:text-2xl font-bold mb-4 md:mb-6 text-deep-50",children:"\uD83D\uDC64 إدارة المستخدمين"}),x&&s.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg",children:x}),m&&s.jsx("div",{className:"mb-4 text-center",children:(0,s.jsxs)("div",{className:"inline-flex items-center gap-2",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-sakura-50"}),s.jsx("span",{children:"جاري التحميل..."})]})}),(0,s.jsxs)("div",{className:"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[s.jsx("input",{className:"border border-gray-300 p-2 rounded focus:outline-none focus:ring-2 focus:ring-sakura-50",type:"text",placeholder:"اسم المستخدم",value:n.username,onChange:e=>i({...n,username:e.target.value})}),s.jsx("input",{className:"border border-gray-300 p-2 rounded focus:outline-none focus:ring-2 focus:ring-sakura-50",type:"email",placeholder:"البريد الإلكتروني",value:n.email,onChange:e=>i({...n,email:e.target.value})}),s.jsx("input",{className:"border border-gray-300 p-2 rounded focus:outline-none focus:ring-2 focus:ring-sakura-50",type:"password",placeholder:"كلمة المرور",value:n.password,onChange:e=>i({...n,password:e.target.value})}),(0,s.jsxs)("select",{className:"border border-gray-300 p-2 rounded focus:outline-none focus:ring-2 focus:ring-sakura-50",value:n.role,onChange:e=>i({...n,role:e.target.value}),children:[s.jsx("option",{value:"admin",children:"مدير"}),s.jsx("option",{value:"cashier",children:"كاشير"}),s.jsx("option",{value:"user",children:"مستخدم"})]})]}),c?s.jsx("button",{onClick:j,className:"btn-secondary",children:"تحديث المستخدم"}):s.jsx("button",{onClick:y,className:"btn-primary",children:"إضافة مستخدم"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-deep-50",children:["قائمة المستخدمين (",a.length,")"]}),s.jsx("div",{className:"hidden md:block overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full border-collapse border border-gray-300",children:[s.jsx("thead",{children:(0,s.jsxs)("tr",{className:"bg-deep-50 text-white",children:[s.jsx("th",{className:"border border-gray-300 p-3 text-right",children:"اسم المستخدم"}),s.jsx("th",{className:"border border-gray-300 p-3 text-right",children:"البريد الإلكتروني"}),s.jsx("th",{className:"border border-gray-300 p-3 text-right",children:"الدور"}),s.jsx("th",{className:"border border-gray-300 p-3 text-right",children:"الإجراءات"})]})}),s.jsx("tbody",{children:a.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"border border-gray-300 p-3 text-right",children:e.username}),s.jsx("td",{className:"border border-gray-300 p-3 text-right",children:e.email}),s.jsx("td",{className:"border border-gray-300 p-3 text-right",children:s.jsx("span",{className:`px-2 py-1 rounded text-xs ${"admin"===e.role?"bg-red-100 text-red-800":"cashier"===e.role?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:"admin"===e.role?"مدير":"cashier"===e.role?"كاشير":"مستخدم"})}),s.jsx("td",{className:"border border-gray-300 p-3 text-right",children:(0,s.jsxs)("div",{className:"flex gap-2 justify-end",children:[s.jsx("button",{onClick:()=>{u(e),i({username:e.username,email:e.email,password:"",role:e.role})},className:"bg-yellow-500 hover:bg-yellow-600 text-white px-3 py-1 rounded text-sm",children:"تعديل"}),s.jsx("button",{onClick:()=>N(e._id),className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm",children:"حذف"})]})})]},e._id))})]})}),s.jsx("div",{className:"md:hidden space-y-3",children:a.map(e=>(0,s.jsxs)("div",{className:"border border-gray-300 rounded-lg p-4 bg-white",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"font-bold text-gray-800",children:e.username}),s.jsx("p",{className:"text-sm text-gray-600",children:e.email})]}),s.jsx("span",{className:`px-2 py-1 rounded text-xs ${"admin"===e.role?"bg-red-100 text-red-800":"cashier"===e.role?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:"admin"===e.role?"مدير":"cashier"===e.role?"كاشير":"مستخدم"})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{u(e),i({username:e.username,email:e.email,password:"",role:e.role})},className:"flex-1 bg-yellow-500 hover:bg-yellow-600 text-white py-2 rounded text-sm",children:"تعديل"}),s.jsx("button",{onClick:()=>N(e._id),className:"flex-1 bg-red-500 hover:bg-red-600 text-white py-2 rounded text-sm",children:"حذف"})]})]},e._id))}),0===a.length&&!m&&s.jsx("div",{className:"text-center py-8 text-gray-500",children:"لا توجد مستخدمين"})]})]})}},35047:(e,r,a)=>{var s=a(77389);a.o(s,"usePathname")&&a.d(r,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(r,{useRouter:function(){return s.useRouter}})}};